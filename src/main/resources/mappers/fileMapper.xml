<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="fileMapper">
  	<resultMap type="FileDTO" id="test">
  		<id property="fnum" column="f_num"/>
  		<result property="num" column="n_num"/>
  		<result property="fileName" column="file_name"/>
  		<result property="oriName" column="ori_name"/>
   	</resultMap>
   	
   	<resultMap type="com.iu.board.NoticeTestDTO" id="noticeTest">
   		<id property="num" column="num"/>
   		<result property="writer" column="writer"/>
   		<result property="title" column="title"/>
   		<result property="contents" column="contents"/>
   		<association property="fileDTO" javaType="FileDTO" resultMap="fileResult">
   			<!-- <id property="fnum" column="fnum"/>
   			<result property="num" column="num"/>
   			<result property="fileName" column="filename"/>
   			<result property="oriName" column="oriname"/> -->
   		</association>
   	</resultMap>
   	
   	<resultMap type="FileDTO" id="fileReuslt">
   		<id property="fnum" column="fnum"/>
   			<result property="num" column="num"/>
   			<result property="fileName" column="filename"/>
   			<result property="oriName" column="oriname"/>
   	</resultMap>
   	
   	<resultMap type="NoticeDTO" id="noticeResult">
   		<id property="num" column="num"/>
   		<result property="writer" column="writer"/>
   		<result property="title" column="title"/>
   		<result property="contents" column="contents"/>
   		<collection property="fileNames" javaType="ArrayList" ofType="FileDTO">
   		<id property="fnum" column="fnum"/>
   			<result property="num" column="num"/>
   			<result property="fileName" column="filename"/>
   			<result property="oriName" column="oriname"/>
   		</collection>
   	</resultMap>
   	
   	<select id="selectTest3" resultMap="noticeResult">
	select notice.*,upload.* from notice, upload where notice.num=665 and notice.num=upload.num
   	</select>
   	
 
   	
   	<select id="selectTest2" parameterType="int" resultMap="noticeTest">
   		select notice.*,upload.* from notice, upload where notice.num=1 and notice.num=upload.num
   	</select>
   	
   	<select id="selectTest" parameterType="int" resultMap="test">
   		select fnum f_num, num n_num,fileName file_name,oriName ori_name
   		from upload where num=#{num}
   	</select>
  	
  	
  	<insert id="insert" parameterType="FileDTO">
  		insert into upload 
  		values
  		(board_seq.nextval, #{num}, #{fileName},#{oriName})
  	</insert>
  	
  	<select id="selectList" parameterType="java.lang.Integer" resultType="FileDTO">
  	select * from upload where num =#{num}
  	</select>
  
  
  </mapper>